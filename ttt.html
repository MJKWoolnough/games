<!doctype html><html lang="en"><head><title>Tic-Tac-Toe</title><link rel="shortcut icon" sizes="any" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 99 99' stroke='%23000' fill='none'%3E%3Crect width='100%25' height='100%25' fill='%23fff' stroke='none' /%3E%3Cline x1='33' x2='33' y2='99' /%3E%3Cline x1='66' x2='66' y2='99' /%3E%3Cline y1='33' x2='99' y2='33' /%3E%3Cline y1='66' x2='99' y2='66' /%3E%3Cpath id='X' d='m5,5 l23,23 m0,-23 l-23,23' stroke-width='2' /%3E%3Ccircle id='O' cx='49' cy='16' r='13' stroke-width='2' fill='none' /%3E%3Cuse href='%23X' x='33' y='33' /%3E%3Cuse href='%23O' x='33' y='66' /%3E%3Cuse href='%23X' y='66' /%3E%3Cuse href='%23O' x='-33' y='33' /%3E%3Cuse href='%23X' x='66' /%3E%3Cline x1='5' y1='85' x2='94' y2='14' stroke='%23f00' stroke-width='3' /%3E%3C/svg%3E" /><script type="module">class e extends CSSStyleSheet{#e;#t;constructor(e="",t=0){super(),this.#e=i.test(e)?e:"_",this.#t=t}add(e,t={}){for(const[n,o]of"string"==typeof e?[[e,t]]:Object.entries(e))for(const e of r(n,o))this.insertRule(e,this.cssRules.length);return this}at(e,t){if(t){let n="";for(const e in t)for(const o of r(e,t[e]))n+=o;n&&this.insertRule(e+"{"+n+"}",this.cssRules.length)}else this.insertRule(e,this.cssRules.length);return this}id(){return this.#e+this.#t++}ids(e){return Array.from({length:e},(()=>this.id()))}toString(){let e="";for(const t of this.cssRules)e+=t.cssText;return e}render(){const e=document.createElement("style");return e.setAttribute("type","text/css"),e.textContent=this+"",e}}const t=e=>{const t=[],n=[];let o=0;for(let i=0;i<e.length;i++){const r=e.charAt(i);if('"'===r||"'"===r)for(i++;i<e.length;i++){const t=e.charAt(i);if("\\"===t)i++;else if(t===r)break}else","!==r||t.length?r===t.at(-1)?t.pop():"["===r?t.push("]"):"("===r&&t.push(")"):(n.push(e.slice(o,i)),o=i+1)}return n.push(e.slice(o,e.length)),n},n=(e,n)=>{const o=t(n);let i="";for(const n of t(e))for(const e of o)i+=(i.length?",":"")+n+e;return i},o=e=>Object.getPrototypeOf(e)===Object.prototype,i=/^\-?[_a-z\240-\377][_a-z0-9\-\240-\377]*$/i,r=(e,t)=>{const i=[];let l="";for(const s in t){const a=t[s];o(a)?i.push(...r(n(e,s),a)):l+=`${s}:${a};`}return l&&i.unshift(e+"{"+l+"}"),i},l=new e,s=l.add.bind(l),a=l.at.bind(l),f=(l.id.bind(l),l.ids.bind(l),l.render.bind(l)),c=(e,t=[])=>{if(p(e))t.push(e[A]);else if("string"==typeof e||e instanceof Node)t.push(e);else if(Array.isArray(e))for(const n of e)c(n,t);else(e instanceof NodeList||e instanceof HTMLCollection)&&t.push(...e);return t},d=e=>e instanceof Function||(e=>e instanceof Object&&e.handleEvent instanceof Function)(e)&&(!(k in e)||d(e[k])),h=e=>d(e)||e instanceof Array&&3===e.length&&d(e[0])&&e[1]instanceof Object&&"boolean"==typeof e[2],g=e=>e instanceof Object&&!u(e),m=e=>e instanceof CSSStyleDeclaration||e instanceof Object&&!u(e),u=e=>e instanceof Object&&b in e,p=e=>e instanceof Object&&A in e,y=(e,t)=>{const n=document.createAttributeNS(null,e);return n.textContent=t,n},A=Symbol("child"),b=Symbol("attr"),k=Symbol("value"),F=e=>e instanceof Array||"string"==typeof e||e instanceof Element||e instanceof DocumentFragment||e instanceof Text||p(e)||e instanceof NodeList||e instanceof HTMLCollection,x=(e,t,n)=>{if(t&&F(t))n=t;else if(t instanceof NamedNodeMap&&e instanceof Element)for(const n of t)e.setAttributeNode(n.cloneNode());else if(e&&"object"==typeof t){const n=!!((o=e).style&&o.classList&&o.removeAttribute&&o.setAttributeNode&&o.toggleAttribute);for(const o in t){const i=t[o];if(h(i)&&o.startsWith("on")){const t=i instanceof Array;e[t&&i[2]?"removeEventListener":"addEventListener"](o.slice(2),t?i[0]:i,!!t&&i[1])}else if(n)if("boolean"==typeof i)e.toggleAttribute(o,i);else if(void 0===i)e.removeAttribute(o);else if(i instanceof Array||i instanceof DOMTokenList){if("class"===o&&i.length)for(const t of i){const n=t.slice(0,1),o="!"!==n&&("~"!==n||void 0);e.classList.toggle(o?t:t.slice(1),o)}}else if("class"===o&&g(i))for(const t in i)e.classList.toggle(t,i[t]??void 0);else if("style"===o&&m(i))for(const[t,n]of i instanceof CSSStyleDeclaration?Array.from(i,(e=>[e,i.getPropertyValue(e)])):Object.entries(i))void 0===n?e.style.removeProperty(t):e.style.setProperty(t,n.toString());else null!==i&&e.setAttributeNode(i instanceof Attr?i:Object.assign(u(i)?i[b](o):y(o,i),{realValue:i}))}}var o;return e instanceof Node&&("string"!=typeof n||e.firstChild?n&&(n instanceof Node?e.appendChild(n):e instanceof Element||e instanceof DocumentFragment?e.append(...c(n)):e.appendChild(C(n))):e.textContent=n),e},B=(e,t)=>Object.defineProperties(((n,o)=>x(document.createElementNS(e,t),n,o)),{name:{value:t},[A]:{get:()=>document.createElementNS(e,t)}}),C=e=>{const t=document.createDocumentFragment();return"string"==typeof e?t.textContent=e:e instanceof Node?t.append(e):void 0!==e&&t.append(...c(e)),t},O=(e,t,n)=>{if(!e)return e;if(t&&F(t)&&(t=void(n=t)),"string"==typeof n)n=void(e.textContent=n);else if(n&&e instanceof Element)n=void e.replaceChildren(...c(n));else for(;e.lastChild;)e.lastChild.remove();return x(e,t,n)},[S,Z,G,v,E,N,R,L,D,X,j,w,Y,T,V,W,M,P,q,Q,U,I,J,K,z,H,$,_,ee,te,ne,oe,ie,re,le,se,ae,fe,ce,de,he,ge,me,ue,pe,ye,Ae,be,ke,Fe,xe,Be,Ce,Oe,Se,Ze,Ge,ve,Ee,Ne,Re,Le,De,Xe,je,we,Ye,Te,Ve,We,Me,Pe,qe,Qe,Ue,Ie,Je,Ke,ze,He,$e,_e,et,tt,nt,ot,it,rt,lt,st,at,ft,ct,dt,ht,gt,mt,ut,pt,yt,At,bt,kt,Ft,xt,Bt,Ct,Ot,St,Zt,Gt]="a abbr address area article aside audio b base bdi bdo blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd label legend li link main map mark menu meta meter nav noscript object ol optgroup option output p picture pre progress q rp rt ruby s samp script section select slot small source span strong style sub summary sup table tbody td template textarea tfoot th thead time title tr track u ul var video wbr".split(" ").map((e=>B("http://www.w3.org/1999/xhtml",e))),vt="complete"===document.readyState?Promise.resolve():new Promise((e=>window.addEventListener("load",e,{once:!0}))),[Et,Nt,Rt,Lt,Dt,Xt,jt,wt,Yt,Tt,Vt,Wt,Mt,Pt,qt,Qt,Ut,It,Jt,Kt,zt,Ht,$t,_t,en,tn,nn,on,rn,ln,sn,an,fn,cn,dn,hn,gn,mn,un,pn,yn,An,bn,kn,Fn,xn,Bn,Cn,On,Sn,Zn,Gn,vn,En,Nn,Rn,Ln,Dn,Xn,jn,wn,Yn,Tn]="a animate animateMotion animateTransform circle clipPath defs desc ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feDropShadow feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter foreignObject g image line linearGradient marker mask metadata mpath path pattern polygon polyline radialGradient rect script set stop style svg switch symbol text textPath title tspan use view".split(" ").map((e=>B("http://www.w3.org/2000/svg",e))),Vn="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",Wn=[Array.from({length:26},((e,t)=>String.fromCharCode(65+t))),Array.from({length:26},((e,t)=>String.fromCharCode(97+t))),Array.from({length:10},((e,t)=>String.fromCharCode(48+t))),["+","/"]].flat(),Mn=e=>Wn.indexOf(e.charAt(0))<<18|Wn.indexOf(e.charAt(1))<<12|Wn.indexOf(e.charAt(2))<<6|Wn.indexOf(e.charAt(3)),Pn=new Map,qn=e=>3*(e/3|0)+2-e%3,Qn=e=>2-(e/3|0)+e%3*3,Un=(e,t)=>e>>(t<<1)&3,In=Array.from({length:9},(e=>0)),Jn=(e,t)=>In.reduce(((n,o,i)=>((e,t,n)=>e|n<<(t<<1))(n,e(i),t(i))),0);for(let e=0;e<Vn.length;e+=4){const t=[[],[],[],[],[],[]];let n=Mn(Vn.slice(e,e+4)),o=0;for(let e=0;e<9;e++){let i=n%6;n=n/6|0,i>1&&i++,i>3&&i++,i>0&&i<5&&(i+=1-(1&e)),i>=6?o|=i-5<<(e<<1):t[i].push(e)}Pn.set(o,t)}vt.then((()=>{s("html,body",{padding:0,margin:0}),s("body>div>div",{display:"grid","grid-template-columns":"repeat(2, 1fr)","grid-column-gap":"0","grid-row-gap":0}),s("input:not(:checked)+select",{display:"none"}),s("svg",{"max-width":"100vw","max-height":"100vh"," rect":{"stroke-width":0}," use":{display:"none"}," text":{"pointer-events":"none"},".X .C use:first-child,.O .C use:nth-child(2)":{display:"unset"},".X,.O":{" .C rect":{display:"unset",":hover":{opacity:.5,cursor:"crosshair"}}}," .C":{" rect":{display:"none"},".X use":{":first-child":{display:"unset"},":nth-child(2)":{display:"none"}},".O use":{":first-child":{display:"none"},":nth-child(2)":{display:"unset"}},".X,.O":{" rect":{display:"none"}}}," .W":{stroke:"#f00","stroke-width":3,display:"none"}," #S":{", text:not(:last-child)":{display:"none"},".X,.O,.D":{display:"unset"},".X text:nth-child(2),.O text:nth-child(3),.D text:nth-child(4)":{display:"unset"}," rect:last-of-type:hover":{cursor:"pointer","+text":{fill:"#f00",stroke:"#f00"}}}}),a("@media (prefers-color-scheme: light)",{"html, body":{"background-color":"#fff"},svg:{stroke:"#000"," rect":{fill:"#fff"}," text":{fill:"#000"}}}),a("@media (prefers-color-scheme: dark)",{"html, body":{"background-color":"#222"},svg:{stroke:"#fff"," rect":{fill:"#222"}," text":{fill:"#fff"}}}),x(document.head,f());let e=0,t=-1;const n=n=>{-1!==t&&clearTimeout(t);for(const e of h)x(e,{class:["!X","!O"]});for(const e of g)x(e,{style:""});p.fill(0),x(u,{class:""}),o(y,e=n),l()},o=(e,t)=>x(e,{class:"C "+(1===t?"X":2===t?"O":"")}),i=i=>{if(p[i]||!e)return;o(h[i],p[i]=e);const s=d(),a=p.every((e=>e));if(s>=0||a){const o=3-e,i=()=>n(o);x(g[s],{style:"display: unset"}),x(u,{class:-1===s?"D":1===e?"X":"O"}),x(m,{onclick:(f=i,[f,{once:!0,capture:!1,passive:!1,signal:void 0},!1])}),e=3,t=setTimeout(i,r)}var f;o(y,e=3-e),l()},r=1e3,l=()=>{if(!A[e-1])return;const t=((e,t,n)=>{const o=e.filter((e=>e)).length,i=t-1!=o%1?2:1;if(9===o)return-1;let r,l=Jn((e=>e),(t=>e[t]?e[t]===i?1:2:0)),s=0,a=0;e:for(;s<2;s++){for(a=0;a<4;a++){if(r=Pn.get(l),r)break e;l=Jn(Qn,(e=>Un(l,e)))}l=Jn(qn,(e=>Un(l,e)))}if(!r)throw new Error("impossible board");const f=[];for(let e=5;e>=0&&(f.splice(0,0,...r[e]),!(e<=n&&f.length>0));e--);let c=f[Math.floor(Math.random()*f.length)];for(;a<4;a++)c=Qn(c);return s&&(c=qn(c)),c})(p,e,b[e-1]),n=e;o(y,e=0),setTimeout((()=>{o(y,e=n),i(t)}),250)},c=[[0,1,2],[0,3,6],[3,4,5],[1,4,7],[6,7,8],[2,5,8],[0,4,8],[2,4,6]],d=()=>{let e=0;for(const[t,n,o]of c){if(p[t]&&p[t]===p[n]&&p[t]===p[o])return e;e++}return-1},h=Array.from({length:9},((e,t)=>gn({class:"C",transform:`translate(${t%3*33} ${33*Math.floor(t/3)})`},[Yn({href:"#X"}),Yn({href:"#O"}),Sn({width:33,height:33,onclick:()=>i(t)})]))),g=Array.from({length:3},((e,t)=>[un({class:"W",x1:0,y1:16+33*t,x2:99,y2:16+33*t}),un({class:"W",x1:16+33*t,y1:0,x2:16+33*t,y2:99})])).concat([un({class:"W",x1:16,y1:16,x2:83,y2:83}),un({class:"W",x1:83,y1:16,x2:16,y2:83})]).flat(),m=Sn({x:-28,y:18,width:56,height:17,style:{fill:"#888",border:"2px outset #000"}}),u=gn({id:"S","text-anchor":"middle","dominant-baseline":"hanging",transform:"translate(49,30)"},[Sn({x:-28,width:56,height:20,fill:"#f00"}),Dn("X wins!"),Dn("O wins!"),Dn("Draw!"),m,Dn({y:20},"Restart")]),p=Array.from({length:9},(()=>0)),y=Nn({viewBox:"0 0 99 99"},[jt([Fn({id:"X",d:"m5,5 l23,23 m0,-23 l-23,23","stroke-width":2}),Dt({id:"O",cx:16,cy:16,r:13,"stroke-width":2,fill:"none"})]),h,un({x1:33,x2:33,y2:99}),un({x1:66,x2:66,y2:99}),un({y1:33,x2:99,y2:33}),un({y1:66,x2:99,y2:66}),g,u]),A=[!1,!1],b=[5,5];O(document.body,ee([ee(Array.from({length:2},((e,t)=>ee([de(`Player ${t+1}`),Ze({for:`human_${t}`},"Human"),Ce({type:"radio",name:`player_${t}`,id:`human_${t}`,checked:!0,onclick:()=>A[t]=!1}),T(),Ze({for:`ai_${t}`},"CPU"),Ce({type:"radio",name:`player_${t}`,id:`ai_${t}`,onclick:()=>A[t]=!0}),nt({onchange:function(){b[t]=parseInt(this.value)}},Array.from({length:6},((e,t)=>Me({value:5-t},6-t+""))))])))),V({onclick:()=>{n(1),O(document.body,y)}},"Start!")]))}));</script></head><body><h1>Loading...</h1></body></html>